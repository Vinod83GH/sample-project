import _ from 'lodash/fp';
import * as unchainedUIReact from 'src/components';

import {
  META
} from 'src/lib';

export const exampleContext = require.context('docs/app/Examples/', true, /(\w+Example\w*|index)\.jsx$/);

export const parentComponents = _.flow(
  _.filter(META.isParent),
  _.sortBy('_meta.name')
)(unchainedUIReact);

export const repoURL = 'https://github.com/Gale43/GALE-Unchained-UI-React';

export const scrollToAnchor = () => {
  const anchor = location.hash && document.querySelector(location.hash);

  // no scroll to target, stop
  if (!anchor) return;

  const elementTop = Math.round(anchor.getBoundingClientRect().top);

  // scrolled to element, stop
  if (elementTop === 0) return;

  // hit max scroll boundaries, stop
  const isScrolledToTop = scrollY === 0;
  const isScrolledToBottom = scrollY + document.body.clientHeight === document.body.scrollHeight;
  const scrollStep = Math.ceil((Math.abs(elementTop / 8))) * Math.sign(elementTop);

  /* eslint-disable no-mixed-operators */
  if (isScrolledToBottom && scrollStep > 0 || isScrolledToTop && scrollStep < 0) return;
  /* eslint-enable no-mixed-operators */

  // more scrolling to do!
  scrollBy(0, scrollStep);
  requestAnimationFrame(scrollToAnchor);
};

export const typeOrder = [
  META.TYPES.CONTAINER,
  META.TYPES.CONTROL,
  META.TYPES.LAYOUT,
  META.TYPES.MEDIA,
  META.TYPES.NAVIGATION,
  META.TYPES.TEXT,
];
