import _ from 'lodash';
import React, { Component, createElement } from 'react';
import PropTypes from 'prop-types';

import {
  Grid
} from 'src/components';

import {
  exampleContext,
} from 'docs/app/utils';

import {
  ContributionPrompt,
} from 'docs/app/components';

export default class ComponentExamples extends Component {
  static propTypes = {
    name: PropTypes.string,
  }

  renderExamples = () => {
    const {
      name
    } = this.props;

    const examplePath = _.find(exampleContext.keys(), path => new RegExp(`${name}/index.jsx$`).test(path));

    return examplePath && createElement(exampleContext(examplePath).default);
  }

  renderMissingExamples = () => {
    const {
      name
    } = this.props;

    return (
      <Grid padded>
        <Grid.Column>
          <ContributionPrompt>
            Looks like we are missing <code>{`<${name} />`}</code> examples.
          </ContributionPrompt>
        </Grid.Column>
      </Grid>
    );
  }

  render() {
    return this.renderExamples() || this.renderMissingExamples();
  }
}
